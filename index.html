<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Get Data Teams With Automate</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
</head>
<body>
    <h3 class="text-center pt-4">Test Get Data Teams With Automate</h3>
    <div class="button-wrapper text-center">
        <button class="btn btn-primary" id="fetchButton">Update Data</button>
    </div>
    <div class="table-wrapper pt-3 w-50 text-center mx-auto" id="tableContainer">
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <script>
        // function param(object) {
        //     return new URLSearchParams(object).toString();
        // }

        // // Fungsi untuk mengambil data melalui GET request
        // function fetchData(baseUrl, params) {
        //     // Bangun URL dengan parameter
        //     const url = new URL(baseUrl);
        //     let parameter = param(params) ;
        //     let url_domain = `${url}?${parameter}`;
        //     console.log(url_domain);

        //     // Lakukan GET request menggunakan Fetch API
        //     fetch(url_domain)
        //         .then(response => {
        //             if (!response.ok) {
        //                 throw new Error(`HTTP error! Status: ${response.status}`);
        //             }
        //             return response.json(); // Mengonversi hasil ke JSON
        //         })
        //         .then(data => {
        //             displayTable(data); // Tampilkan data dalam bentuk tabel
        //         })
        //         .catch(error => {
        //             console.error("Terjadi kesalahan:", error);
        //         });
        // }

        // // Fungsi untuk menampilkan data dalam bentuk tabel
        // function displayTable(data) {
        //     const tableContainer = document.getElementById("tableContainer");

        //     // Buat elemen tabel
        //     let table = '<table class="table table-hover">';
        //     table += `
        //         <tr>
        //             <th>Name</th>
        //             <th>Jobdesk</th>
        //         </tr>
        //     `;

        //     // Tambahkan baris data
        //     data.forEach(item => {
        //         table += `
        //             <tr>
        //                 <td>${item.name}</td>
        //                 <td>${item.jobdesk}</td>
        //             </tr>
        //         `;
        //     });

        //     table += "</table>";

        //     // Tambahkan tabel ke dalam kontainer
        //     tableContainer.innerHTML = table;
        // }

        function sendData(url, data) {
            fetch(url, {
                method: 'POST', // Menggunakan metode POST
                headers: {
                    'Content-Type': 'application/json', // Memberikan informasi data
                },
                body: JSON.stringify(data),
                redirect: 'follow'
            })
            .then((response) => {
                if (!response.ok) {
                    throw new Error(`HTTP error! Status: ${response.status}`);
                }
                return response.json(); // Mengambil respons sebagai JSON (jika ada respons)
            })
            .then((result) => {
                console.log('Success:', result); // Menampilkan hasil dari server
            })
            .catch((error) => {
                console.error('Error:', error); // Menampilkan error jika terjadi masalah
            });
        }

        // Tambahkan event listener ke tombol
        document.getElementById("fetchButton").addEventListener("click", () => {
            // const baseUrl = "http://127.0.0.1:5500/index.html";
            // const params = { 
            //     name: "Nizan",
            //     jobdesk: "IT Suppport"
            // }; // Parameter yang akan ditambahkan ke URL
            // fetchData(baseUrl, params); // Panggil fungsi fetchData

            const url = 'https://prod-58.southeastasia.logic.azure.com:443/workflows/164aa6742fb24b1ca642e0332e335121/triggers/manual/paths/invoke?api-version=2016-06-01&sp=%2Ftriggers%2Fmanual%2Frun&sv=1.0&sig=um34yoDXKBgtZWWuGSaO1l92wt4EOIlQ1U2cM71hFm4';
            const data = {
                "name":"Nizan",
                "jobdesk":"IT Support"
            };

            sendData(url, data);
        });
    </script>
</body>
</html>